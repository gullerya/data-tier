import{VIEW_PARAMS_KEY}from"./utils.min.js";const views={};export{obtainTieViews,deleteTieViews,addView,delView};function obtainTieViews(e){let i=views[e];return i||(i={_pathsCache:[]},views[e]=i),i}function deleteTieViews(e){delete views[e]}function addView(e,i){let n,t,s,o,w=i.length;for(;w;)if((n=i[--w]).isFunctional)for(o=(t=n.fParams).length;o;)seekAndInsertView(s=t[--o],e);else seekAndInsertView(n,e);e[VIEW_PARAMS_KEY]=i}function seekAndInsertView(e,i){const n=e.tieKey,t=e.rawPath,s=obtainTieViews(n);let o=s[t];o||(o=[],s[t]=o,s._pathsCache.push(t)),o.indexOf(i)<0&&o.push(i)}function delView(e,i){let n,t,s,o,w=i.length;for(;w;)if((n=i[--w]).isFunctional)for(o=(t=n.fParams).length;o;)seekAndRemoveView(s=t[--o],e);else seekAndRemoveView(n,e);delete e[VIEW_PARAMS_KEY]}function seekAndRemoveView(e,i){const n=e.tieKey,t=e.rawPath,s=views[n][t],o=s?s.indexOf(i):-1;o>=0&&s.splice(o,1)}